<html>
<head>
  <title>Dojo URL</title>
  <link rel="stylesheet" href="http://bootswatch.com/flatly/bootstrap.min.css"/>

  <script type="text/javascript">
    function makeShort() 
    {
      var longUrl = document.getElementById("longurl").value;
      var request = gapi.client.urlshortener.url.insert({
      'resource': {
      'longUrl': longUrl
	    }
    });
      request.execute(function(response) 
	  {
		
		if(response.id != null)
		{
			str ="<li class='list-group-item text-center'><span class='badge'>"+longUrl+"</span><a target='_blank' href="+response.id+">"+response.id+"</a></li>";
			document.getElementById("output").innerHTML += str;
		}
		else
		{
			alert("error: creating short url");
		}
	
    });
    }

    function load()
    {
	    gapi.client.setApiKey('AIzaSyDtFnUk9Edkeyjuw1c5NjW2Nnmwb-qkN_o'); 
	    gapi.client.load('urlshortener', 'v1',function(){});
    }
    window.onload = load;
  </script>
  <script src="https://apis.google.com/js/client.js"> </script>
  
</head>
<body class="container">
  <h2 class="text-center">Dojo URL Shortener</h2>
  <hr/>
  <div class="well">
    <input type="text" id="longurl" name="url" placeholder="http://www.adambyrne.net" class="form-control text-center"/>
    <input type="button" value="Create Shortened" onclick="makeShort();"  class="btn btn-block btn-success"/>
 </div>

 
  <ul class="list-group" id="output"></ul>
 
 
</body>
</html>
